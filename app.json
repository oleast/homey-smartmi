{
  "id": "com.smartmi.airpurifier",
  "version": "1.0.0",
  "compatibility": ">=5.0.0",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Smartmi Air Purifier"
  },
  "description": {
    "en": "Unofficial Homey app to control Smartmi Air Purifier devices via local Tuya protocol"
  },
  "category": [
    "climate"
  ],
  "permissions": [],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "oleast",
    "email": ""
  },
  "contributors": {
    "developers": []
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": ""
      }
    }
  },
  "bugs": {
    "url": "https://github.com/oleast/homey-smartmi/issues"
  },
  "source": "https://github.com/oleast/homey-smartmi",
  "homeyCommunityTopicId": 0,
  "support": "",
  "brandColor": "#2196F3",
  "drivers": [
    {
      "id": "smartmi-p1",
      "name": {
        "en": "Smartmi Air Purifier P1"
      },
      "class": "air_purifier",
      "capabilities": [
        "onoff",
        "dim",
        "air_purifier_mode",
        "measure_pm25",
        "measure_pm10",
        "child_lock",
        "sound_enabled",
        "screen_brightness",
        "timer_mode",
        "timer_remaining",
        "filter_life",
        "filter_usage"
      ],
      "capabilitiesOptions": {
        "dim": {
          "title": {
            "en": "Fan Speed"
          },
          "min": 0,
          "max": 1,
          "step": 0.01
        }
      },
      "energy": {
        "approximation": {
          "usageConstant": 35
        }
      },
      "images": {
        "small": "/drivers/smartmi-p1/assets/images/small.png",
        "large": "/drivers/smartmi-p1/assets/images/large.png",
        "xlarge": "/drivers/smartmi-p1/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Device Settings"
          },
          "children": [
            {
              "id": "ipAddress",
              "type": "text",
              "label": {
                "en": "IP Address"
              },
              "value": "",
              "hint": {
                "en": "The IP address of your Smartmi Air Purifier P1"
              }
            },
            {
              "id": "localKey",
              "type": "text",
              "label": {
                "en": "Local Key"
              },
              "value": "",
              "hint": {
                "en": "The local key for your device (obtained from Tuya/Smartmi app)"
              }
            },
            {
              "id": "deviceId",
              "type": "text",
              "label": {
                "en": "Device ID"
              },
              "value": "",
              "hint": {
                "en": "The device ID (obtained from Tuya/Smartmi app)"
              }
            },
            {
              "id": "protocol",
              "type": "dropdown",
              "label": {
                "en": "Protocol Version"
              },
              "value": "3.3",
              "values": [
                {
                  "id": "3.1",
                  "label": {
                    "en": "3.1"
                  }
                },
                {
                  "id": "3.3",
                  "label": {
                    "en": "3.3"
                  }
                },
                {
                  "id": "3.4",
                  "label": {
                    "en": "3.4"
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "capabilities": {
    "air_purifier_mode": {
      "type": "enum",
      "title": {
        "en": "Mode"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "auto",
          "title": {
            "en": "Auto"
          }
        },
        {
          "id": "sleep",
          "title": {
            "en": "Sleep"
          }
        },
        {
          "id": "strong",
          "title": {
            "en": "Strong"
          }
        },
        {
          "id": "manual",
          "title": {
            "en": "Manual"
          }
        }
      ]
    },
    "child_lock": {
      "type": "boolean",
      "title": {
        "en": "Child Lock"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle"
    },
    "filter_life": {
      "type": "number",
      "title": {
        "en": "Filter Life"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "%"
      },
      "min": 0,
      "max": 100
    },
    "measure_pm10": {
      "type": "number",
      "title": {
        "en": "PM10"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "µg/m³"
      },
      "min": 0,
      "icon": "/assets/pm10.svg"
    },
    "sound_enabled": {
      "type": "boolean",
      "title": {
        "en": "Sound"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle",
      "icon": "/assets/sound.svg"
    },
    "screen_brightness": {
      "type": "enum",
      "title": {
        "en": "Screen Brightness"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "auto",
          "title": {
            "en": "Auto"
          }
        },
        {
          "id": "off",
          "title": {
            "en": "Off"
          }
        },
        {
          "id": "dim",
          "title": {
            "en": "Dim"
          }
        },
        {
          "id": "bright",
          "title": {
            "en": "Bright"
          }
        }
      ]
    },
    "timer_mode": {
      "type": "enum",
      "title": {
        "en": "Timer"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "off",
          "title": {
            "en": "Off"
          }
        },
        {
          "id": "1_hour",
          "title": {
            "en": "1 hour"
          }
        },
        {
          "id": "2_hour",
          "title": {
            "en": "2 hours"
          }
        },
        {
          "id": "4_hour",
          "title": {
            "en": "4 hours"
          }
        },
        {
          "id": "8_hour",
          "title": {
            "en": "8 hours"
          }
        }
      ]
    },
    "timer_remaining": {
      "type": "number",
      "title": {
        "en": "Timer Remaining"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "min"
      },
      "min": 0
    },
    "filter_usage": {
      "type": "number",
      "title": {
        "en": "Filter Usage"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "units": {
        "en": "h"
      },
      "min": 0
    }
  }
}
